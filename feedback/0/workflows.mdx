---
sidebar_label: Workflows
---

import WorkflowsExamplesP1 from './_workflows-examples-p1.mdx';
import WorkflowsExamplesP2 from './_workflows-examples-p2.mdx';

# GenAI Workflows

Не все AI приложения - агенты! На инженерном языке Агенты - это системы с большой свободой и автономностью - но низким контролем со стороны человека. Перед тем как перейти к агентам, давайте изучимё более контролируемые применеия LLM - потому что в будущем ваши агенты будут их использовать как подсистемы.

## Questions

- Что не является агентом (в нашем, инженерном мире)?
- Что такое Направленный ациклический граф (DAG)?
- Какие подвиды workflows существуют?

## Steps

:::info Инженерное определение

По складывающемуся сейчас в коммьюнити (X, Anthropic, OpenAI) мнениею, агенты - это системы, которые циклично работают до тех пор, пока сами не решают остановиться. Благодаря LLM Агент может сам оценивать, наскольо он хорошо выполнил задачу, и преостанавливать выполенение (например, через вызов `ToolCall: ReturnFinalAnswer`).

Большинство продвинутых агентов сейчас, кроме оценки выполнения задачи - еще и самостоятельно планируют *подшаги* для достижения цели, и зацикливаются на каждом шаге - пока его не выполнят - и только потом переходят к следущим шагам.

Поэтому всё, что является **DAG - directed acyclic graph** - направленным ациклическим графом - не является агентом. 

<details>
<summary> Кратко про DAG </summary>

<iframe width="560" height="315" src="https://www.youtube.com/embed/1Yh5S-S6wsI?si=In2W4txN8bPkCrsy" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
or 
<iframe width="560" height="315" src="https://www.youtube.com/embed/IltIGJOHYgo?si=8ix-lpFUKrIn5fXt" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>


</details>

<details>
<summary>Исключение</summary>

**Если зацикленность провоцируется строгой логикой - принято считать это workflow, а не агентом.** 

Ниже вы увидете workflow "Суммаризация бесконечного текста", который рекурсивно суммирует текст до тех пор, пока не достигнет текста опредлеленной короткой длины. Это не агент, а workflow, хотя и имеет зацикленность.

</details>

:::

### 1. [Read this Anthropic article](https://www.anthropic.com/engineering/building-effective-agents)

### 2. Real-life примеры LLM workflows

:::tip

Изучите примеры ниже. Это важно для архитектурной насмотренности.

Попробуйте "прокомпилировать" некторые пайплайны в голове.

Мы старались писать примеры запросов/промптов - читайте их, если что-то непонятно.

:::

<WorkflowsExamplesP1 />
<WorkflowsExamplesP2 />

В промышленных бизнес-проектах workflows зачастую состоят из 20+ нод, вперемешку с API-интеграциями, строгими логиками, LLM-субворкфлоу и AI Агентами. А иногда могут доходить и до 100 нод.


### 2. [Advanced routing in LLM Workflows](https://youtu.be/-EYyrlfoqDU?si=y9g6qB8P9ieN6K0C)

## Extra Steps

### E1. langchain

LangChain - это библиотека для построения и использования LLM-workflows. Она старая, но хорошо документирована и имеет большое сообщество.

Просмотрите, какие сущности есть в LangChain: https://python.langchain.com/docs/concepts/

[Пример простейшего langchain кода](https://dev.to/koolkamalkishor/how-to-use-langchain-for-ai-workflow-automation-1i94).

### E2. Patterns meta-understanding

1. https://refactoring.guru/design-patterns/chain-of-responsibility
2. https://refactoring.guru/design-patterns/command

<details>
<summary>Deprecated content</summary>

https://langchain-ai.github.io/langgraph/tutorials/workflows/

</details>

## Now we know...

В этом уроке мы познакомились с основами LLM workflows: разобрали инженерное определение агентов и отличие цикличных систем от DAG‑структур, изучили практические примеры, шаблоны проектирования и погрузились глубже в routing.

:::danger
Однако, не стоит быть слишком строгим с другими людьми в определениях. Понимать разницу между агентами, чат-ботами и workflows нужно лишь инженерам, чтобы избегать мисскоммуникации.

Менеджеры, клиенты и инвесторы понимать эту разницу не должны. Оставляйте им возможность называть всё как им удобнее: AI Агентамы, "нейросети", "искусственный интеллект"".
:::

## Exercises

1. Если в вавшей системе есть зацикленность - то это агент или workflow?
2. Какие паттерны ветвления вы помните?
3. *Для тех, кто проходил модуль по алгоритмам для GenAI:
    - подумайте, как можно соединять алгоритмические подходы и LLM workflows
2. **Спроектируйте на бумаге:**
    - Систему автоматического ответа на запросы в поддержку мобильного приложения по доставке еды
    - Workflow для автоответов на сообщения в ваш мессенджер с незнакомого контакта
    - Систему для автоматического создания постов для вашего блога
    - Систему скоринга кандидата на вакансию, потом систему сравнения нескольких кандидатов сразу





